<ng-container *ngIf="viewModel">
    <section class="settings-section">
        <app-control-ignore-input [control]="viewModel.ignoreInputControl"></app-control-ignore-input>
    </section>
    <section class="settings-section">
        <mat-accordion multi>
            <mat-expansion-panel *ngFor="let axis of viewModel.axes; trackBy: trackAxisByInputIdFn"
                                 #panel="matExpansionPanel"
            >
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ axis.name$ | ngrxPush }}
                    </mat-panel-title>
                    <ng-container *ngIf="!panel.expanded">
                        <mat-panel-description *appHideOnSmallScreen>
                            <app-input-activity-indicator [isActive]="!!(axis.isActivated$ | ngrxPush)"></app-input-activity-indicator>
                            <app-input-output-diagram [compact]="true"
                                                      [rawValue]="axis.rawValue$ | ngrxPush"
                                                      [outputValue]="axis.outputValue$ | ngrxPush"
                                                      [activeZoneStart]="axis.form.controls.activeZoneStart.value"
                                                      [activeZoneEnd]="axis.form.controls.activeZoneEnd.value"
                            ></app-input-output-diagram>
                        </mat-panel-description>
                    </ng-container>
                </mat-expansion-panel-header>

                <app-gamepad-settings-axis-settings *ngIf="panel.expanded"
                                                    [axisSettingsViewModel]="axis"
                ></app-gamepad-settings-axis-settings>
            </mat-expansion-panel>

            <mat-expansion-panel *ngFor="let button of viewModel.buttons; trackBy: trackButtonByInputIdFn"
                                 #panel="matExpansionPanel"
            >
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ button.name$ | ngrxPush }}
                    </mat-panel-title>
                    <ng-container *ngIf="!panel.expanded">
                        <mat-panel-description *appHideOnSmallScreen>
                            <app-input-activity-indicator [isActive]="!!(button.isActivated$ | ngrxPush)"
                            ></app-input-activity-indicator>
                        </mat-panel-description>
                    </ng-container>
                </mat-expansion-panel-header>

                <app-gamepad-settings-button-settings *ngIf="panel.expanded"
                                                      [buttonSettingsViewModel]="button"
                ></app-gamepad-settings-button-settings>
            </mat-expansion-panel>
        </mat-accordion>
    </section>
</ng-container>
