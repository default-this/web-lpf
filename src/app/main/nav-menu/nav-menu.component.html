<mat-toolbar color="primary"
             class="toolbar"
             [class.toolbar__compact]="compact"
>
    <nav *ngIf="!compact; else compactNav"
         class="nav"
    >
        <span class="title">
            {{ 'appTitle' | transloco }}
        </span>

        <span class="main-nav">
            <span class="main-nav-items">
                <a mat-button
                   [routerLink]="routesBuilderService.controllersList"
                   [routerLinkActive]="'active-link'"
                >
                    <mat-icon>
                        gamepad
                    </mat-icon>
                    {{ 'controllersList' | transloco }}
                    <span *ngIf="connectedControllersCount$ | ngrxPush; let count"
                          class="counter"
                    >
                        ({{ count }})
                    </span>
                </a>

                <a mat-button
                   [routerLink]="routesBuilderService.hubsList"
                   [routerLinkActive]="'active-link'"
                >
                    <mat-icon>
                        memory
                    </mat-icon>
                    {{ 'hubsList' | transloco }}
                    <span *ngIf="connectedHubCount$ | ngrxPush; let count"
                          class="counter"
                    >
                        ({{ count }})
                    </span>
                </a>

                <a mat-button
                   [routerLink]="routesBuilderService.controlSchemesList"
                   [routerLinkActive]="'active-link'"
                >
                    <mat-icon>
                        display_settings
                    </mat-icon>
                    {{ 'controlSchemesList' | transloco }}
                    <span *ngIf="controlSchemesCount$ | ngrxPush; let count"
                          class="counter"
                    >
                        ({{ count }})
                    </span>
                </a>
            </span>
        </span>

        <span class="right-side-nav">
            <mat-icon *ngIf="isKeyboardBeingCaptured$ | ngrxPush"
                      class="keyboard-captured-indicator"
                      [matBadge]="'!'"
                      [matBadgeColor]="'accent'"
                      [title]="'keyboardInputCaptured' | transloco"
            >
                keyboard
            </mat-icon>

            <ng-container *ngIf="isBluetoothAvailable | ngrxPush; else bluetoothUnavailable">
                <button mat-fab
                        class="discover-hub-button"
                        color="accent"
                        [title]="'discoverHub' | transloco"
                        (click)="startDiscovery()"
                        [disabled]="isDiscoveryBusy$ | ngrxPush"
                >
                    <mat-icon>
                        bluetooth_searching
                    </mat-icon>
                </button>
            </ng-container>

            <ng-template #bluetoothUnavailable>
                <a mat-fab
                   color="warn"
                   class="no-bluetooth-indicator"
                   [routerLink]="routesBuilderService.bluetoothUnavailable"
                   [title]="'bluetoothUnavailableToolbarTitle' | transloco"
                   appEllipsisTitle
                >
                    <mat-icon>
                        bluetooth_disabled
                    </mat-icon>
                </a>
            </ng-template>

            <a mat-icon-button
               class="about-button"
               [routerLink]="routesBuilderService.about"
               [routerLinkActive]="'active-link'"
               [title]="'aboutPageButton' | transloco"
            >
                <mat-icon>
                    info
                </mat-icon>
            </a>
        </span>
    </nav>
</mat-toolbar>

<ng-template #compactNav>
    <nav class="nav nav__compact">
        <a mat-icon-button
           [routerLink]="routesBuilderService.controllersList"
           [routerLinkActive]="'active-link'"
           [title]="'controllersList' | transloco"
           [matBadge]="connectedControllersCount$ | ngrxPush"
           [matBadgeColor]="'primary'"
           [matBadgeHidden]="!(connectedControllersCount$ | ngrxPush)"
        >
            <mat-icon>
                gamepad
            </mat-icon>
        </a>

        <a mat-icon-button
           [routerLink]="routesBuilderService.hubsList"
           [routerLinkActive]="'active-link'"
           [title]="'hubsList' | transloco"
           [matBadge]="connectedHubCount$ | ngrxPush"
           [matBadgeColor]="'primary'"
           [matBadgeHidden]="!(connectedHubCount$ | ngrxPush)"
        >
            <mat-icon>
                memory
            </mat-icon>
        </a>

        <a mat-icon-button
           [routerLink]="routesBuilderService.controlSchemesList"
           [routerLinkActive]="'active-link'"
           [title]="'controlSchemesList' | transloco"
           [matBadge]="controlSchemesCount$ | ngrxPush"
           [matBadgeColor]="'primary'"
           [matBadgeHidden]="!(controlSchemesCount$ | ngrxPush)"
        >
            <mat-icon>
                display_settings
            </mat-icon>
        </a>

        <ng-container *ngIf="isBluetoothAvailable | ngrxPush; else bluetoothUnavailable">
            <button mat-fab
                    color="accent"
                    [title]="'discoverHub' | transloco"
                    (click)="startDiscovery()"
                    [disabled]="isDiscoveryBusy$ | ngrxPush"
            >
                <mat-icon>
                    bluetooth_searching
                </mat-icon>
            </button>
        </ng-container>

        <ng-template #bluetoothUnavailable>
            <a mat-fab
               color="warn"
               [routerLink]="routesBuilderService.bluetoothUnavailable"
               [title]="'bluetoothUnavailableToolbarTitle' | transloco"
               appEllipsisTitle
            >
                <mat-icon>
                    bluetooth_disabled
                </mat-icon>
            </a>
        </ng-template>

        <a mat-icon-button
           [routerLink]="routesBuilderService.about"
           [routerLinkActive]="'active-link'"
           [title]="'aboutPageButton' | transloco"
        >
            <mat-icon>
                info
            </mat-icon>
        </a>
    </nav>
</ng-template>

