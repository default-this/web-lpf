<ng-container *ngIf="outputFormControl && inputFormControl">
    <h2>
        {{ 'controlScheme.bindingOutputSection' | transloco }}
    </h2>
    <section *ngrxLet="!(selectedHubConnectionState$ | ngrxPush); let selectedHubIsNotConnected"
             class="output-form__content"
    >
        <mat-form-field *ngrxLet="hubsList$; let hubsList">
            <mat-label>{{ 'hub.name' | transloco }}</mat-label>
            <mat-select [formControl]="outputFormControl.controls.hubId">
                <mat-select-trigger *ngIf="selectedHubConfiguration$ | ngrxPush; let selectedHub"
                                    class="selection-trigger"
                >
                    {{ selectedHub.name }}
                </mat-select-trigger>
                <mat-option *ngFor="let hubConfiguration of hubsList"
                            [value]="hubConfiguration.hubId">
                    <mat-icon *ngIf="!hubConfiguration.isConnected"
                              color="warn"
                              [fontIcon]="'link_off'"
                    ></mat-icon>
                    {{ hubConfiguration.name }}
                </mat-option>
            </mat-select>
            <mat-icon *ngIf="selectedHubIsNotConnected"
                      color="warn"
                      class="not-connected-icon"
                      matSuffix
                      [fontIcon]="'link_off'"
            ></mat-icon>
            <span class="cdk-visually-hidden">{{ 'hub.hub' | transloco }}</span>
        </mat-form-field>
        <mat-form-field *ngrxLet="attachedIos$; let attachedIos">
            <mat-label>{{ 'controlScheme.bindingOutputSectionPortLabel' | transloco }}</mat-label>
            <mat-select [formControl]="outputFormControl.controls.portId">
                <mat-select-trigger *ngIf="attachedIos?.length !== 0">
                    {{ outputFormControl.controls.portId.value }}: {{ (ioType$ | ngrxPush)! | ioTypeToL10nKey | transloco }}
                </mat-select-trigger>
                <mat-option *ngFor="let io of attachedIos"
                            [value]="io.portId">
                    <mat-icon *ngIf="selectedHubIsNotConnected"
                              color="warn"
                              class="not-connected-icon"
                              matSuffix
                              [fontIcon]="'link_off'"
                    ></mat-icon>
                    {{ io.portId }}: {{ io.ioType | ioTypeToL10nKey | transloco }}
                </mat-option>
            </mat-select>
            <mat-icon *ngIf="selectedHubIsNotConnected"
                      color="warn"
                      class="not-connected-icon"
                      matSuffix
                      [fontIcon]="'link_off'"
            ></mat-icon>
        </mat-form-field>

        <mat-form-field *ngrxLet="availableIoOperationModes$; let availableIoOperationModes">
            <mat-label>{{ 'controlScheme.bindingOutputSectionOperationModeLabel' | transloco }}</mat-label>
            <mat-select [formControl]="outputFormControl.controls.operationMode">
                <mat-option *ngFor="let ioOperationMode of availableIoOperationModes"
                            [value]="ioOperationMode">
                    {{ ioOperationMode | ioOperationTypeToL10nKey | transloco }}
                </mat-option>
                <mat-option *ngIf="availableIoOperationModes?.length === 0"
                            [disabled]="true"
                            [value]="outputFormControl.controls.operationMode.value">
                    {{ outputFormControl.controls.operationMode.value | ioOperationTypeToL10nKey | transloco }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </section>
</ng-container>
