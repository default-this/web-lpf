<ng-container *ngIf="selectedScheme$ | ngrxPush; let scheme; else schemeNotFound">
    <mat-toolbar color="primary" *ngrxLet="canRunScheme$ | ngrxPush; let canRunScheme">
        <span appEllipsisTitle>
            {{ scheme.name }}
        </span>
        <span class="spacer"></span>
        <mat-icon *ngIf="composeValidationErrorMessage$ | ngrxPush; let validationMessage"
                  [title]="validationMessage"
                  [color]="'accent'"
        >report
        </mat-icon>
        <button mat-stroked-button
                class="toolbar-button"
                [disabled]="!canRunScheme"
                (click)="runScheme(scheme.id)"
        >
            {{ 'runScheme' | transloco }}
        </button>

        <button mat-stroked-button
                class="toolbar-button"
                [disabled]="!(isCurrentControlSchemeRunning$ | ngrxPush)"
                (click)="stopRunningScheme()"
        >
            {{ 'stopScheme' | transloco }}
        </button>
        <a *ngIf="!(isCurrentControlSchemeRunning$ | ngrxPush)"
           mat-stroked-button
           class="toolbar-button"
           [routerLink]="schemeEditSubroute">
            {{ 'editScheme' | transloco }}
        </a>
    </mat-toolbar>

    <section class="running-scheme-view">
        <section class="IOs">
            <app-control-scheme-view-io-list [bindingsWithLatestExecutedTasks]="bindingsWithLatestExecutedTasks$ | ngrxPush"
            ></app-control-scheme-view-io-list>
        </section>
    </section>
</ng-container>

<ng-template #schemeNotFound>
    <section class="scheme-is-not-found">
        <h2>{{ 'schemeIsNotFound' | transloco }}</h2>
    </section>
</ng-template>
