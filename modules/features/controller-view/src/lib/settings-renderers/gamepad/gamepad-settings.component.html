<ng-container *ngIf="viewModel">
    <section class="settings-section">
        {{ viewModel.gamepadId$ | ngrxPush }}
    </section>
    <section class="settings-section">
        <feat-controller-view-control-ignore-input [control]="viewModel.ignoreInputControl"></feat-controller-view-control-ignore-input>
    </section>
    <section class="settings-section">
        <mat-accordion multi>
            <mat-expansion-panel *ngFor="let axis of viewModel.axes; trackBy: trackAxisByInputIdFn"
                                 #panel="matExpansionPanel"
            >
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ axis.name$ | ngrxPush }}
                    </mat-panel-title>
                    <ng-container *ngIf="!panel.expanded">
                        <mat-panel-description *libHideOnSmallScreen>
                            <lib-input-activity-indicator [isActive]="!!(axis.isActivated$ | ngrxPush)"></lib-input-activity-indicator>
                            <feat-controller-view-input-output-diagram [compact]="true"
                                                                       [rawValue]="axis.rawValue$ | ngrxPush"
                                                                       [outputValue]="axis.outputValue$ | ngrxPush"
                                                                       [activeZoneStart]="axis.form.controls.activeZoneStart.value"
                                                                       [activeZoneEnd]="axis.form.controls.activeZoneEnd.value"
                            ></feat-controller-view-input-output-diagram>
                        </mat-panel-description>
                    </ng-container>
                </mat-expansion-panel-header>

                <feat-controller-view-gamepad-settings-axis-settings *ngIf="panel.expanded"
                                                                     [axisSettingsViewModel]="axis"
                ></feat-controller-view-gamepad-settings-axis-settings>

                <mat-action-row>
                    <button mat-button
                            [disabled]="!!(axis.areSettingsDefault$ | ngrxPush)"
                            (click)="resetAxisSettings(axis.inputId)"
                    >{{ 'controller.resetInputSettingsToDefault' | transloco }}</button>
                </mat-action-row>
            </mat-expansion-panel>

            <mat-expansion-panel *ngFor="let button of viewModel.buttons; trackBy: trackButtonByInputIdFn"
                                 #panel="matExpansionPanel"
            >
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ button.name$ | ngrxPush }}
                    </mat-panel-title>
                    <ng-container *ngIf="!panel.expanded">
                        <mat-panel-description *libHideOnSmallScreen>
                            <lib-input-activity-indicator [isActive]="!!(button.isActivated$ | ngrxPush)"
                            ></lib-input-activity-indicator>
                        </mat-panel-description>
                    </ng-container>
                </mat-expansion-panel-header>

                <feat-controller-view-gamepad-settings-button-settings *ngIf="panel.expanded"
                                                                       [buttonSettingsViewModel]="button"
                ></feat-controller-view-gamepad-settings-button-settings>

                <mat-action-row>
                    <button mat-button
                            [disabled]="!!(button.areSettingsDefault$ | ngrxPush)"
                            (click)="resetButtonSettings(button.inputId)"
                    >{{ 'controller.resetInputSettingsToDefault' | transloco }}</button>
                </mat-action-row>
            </mat-expansion-panel>
        </mat-accordion>
    </section>
</ng-container>
